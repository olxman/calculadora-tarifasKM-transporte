<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Tarifas de Transporte Chile 2025</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        const TransportCalculator = () => {
            const [distanceKm, setDistanceKm] = useState(100);
            const [passengers, setPassengers] = useState(5);
            const [includeReturn, setIncludeReturn] = useState(false);
            const [selectedMargin, setSelectedMargin] = useState(25);
            const [driverOption, setDriverOption] = useState('employed');
            const [selectedVehicle, setSelectedVehicle] = useState('h1');
            const [dieselPrice, setDieselPrice] = useState(995);
            const [gasolinePrice, setGasolinePrice] = useState(1300);

            // Configuraci√≥n de veh√≠culos
            const vehicles = {
                h1: {
                    name: "Hyundai H1 2021",
                    fuelType: "Diesel",
                    fuelPrice: dieselPrice,
                    fuelConsumption: 10.5,
                    maintenance: 85,
                    insurance: 15,
                    depreciation: 45,
                    overhead: 20,
                    maxPassengers: 10,
                    icon: "üöê"
                },
                explorer: {
                    name: "Ford Explorer 2025",
                    fuelType: "Bencina 93",
                    fuelPrice: gasolinePrice,
                    fuelConsumption: 11.5,
                    maintenance: 95,
                    insurance: 25,
                    depreciation: 85,
                    overhead: 25,
                    maxPassengers: 7,
                    icon: "üöó"
                }
            };

            const currentVehicle = vehicles[selectedVehicle];

            // Opciones de conductor
            const driverOptions = {
                basic: { cost: 25, label: "B√°sico", description: "C√°lculo original" },
                employed: { cost: 175, label: "Empleado", description: "Sueldo + beneficios" },
                commission: { cost: 85, label: "Comisi√≥n", description: "20% del viaje" },
                owner: { cost: 350, label: "Propietario", description: "Tu tiempo valorizado" }
            };

            const selectedDriverCost = driverOptions[driverOption]?.cost || 175;

            // C√°lculo del costo por kil√≥metro
            const fuelCostPerKm = (currentVehicle.fuelPrice * currentVehicle.fuelConsumption) / 100;
            const totalCostPerKm = fuelCostPerKm + currentVehicle.maintenance + currentVehicle.insurance + 
                                  currentVehicle.depreciation + selectedDriverCost + currentVehicle.overhead;

            // Margen de ganancia seleccionado
            const profitMargin = selectedMargin / 100;
            const finalCostPerKm = totalCostPerKm * (1 + profitMargin);

            // Modelos de ganancia predefinidos
            const marginModels = [
                { value: 25, label: "B√°sico", description: "Competitivo para viajes regulares", color: "bg-blue-500" },
                { value: 35, label: "Est√°ndar", description: "Equilibrio ganancia-competitividad", color: "bg-green-500" },
                { value: 45, label: "Premium", description: "Servicio de alta calidad", color: "bg-orange-500" },
                { value: 50, label: "Ejecutivo", description: "M√°xima ganancia para servicios exclusivos", color: "bg-purple-500" }
            ];

            // C√°lculo de tarifas
            const totalDistance = includeReturn ? distanceKm * 2 : distanceKm;
            const totalCost = finalCostPerKm * totalDistance;
            const costPerPerson = passengers > 0 ? totalCost / passengers : totalCost;

            return (
                <div className="max-w-7xl mx-auto p-6 bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
                    <div className="bg-white rounded-xl shadow-2xl overflow-hidden">
                        {/* Header */}
                        <div className="bg-gradient-to-r from-blue-600 to-indigo-700 p-6 text-white">
                            <div className="flex items-center space-x-3">
                                <span className="text-3xl">üöó</span>
                                <h1 className="text-3xl font-bold">Calculadora de Tarifas de Transporte 2025</h1>
                            </div>
                            <p className="mt-2 text-blue-100">Compara costos entre Hyundai H1 y Ford Explorer - Chile</p>
                        </div>

                        <div className="grid lg:grid-cols-2 gap-8 p-6">
                            {/* Panel de Configuraci√≥n */}
                            <div className="space-y-6">
                                <div className="bg-gray-50 p-6 rounded-lg">
                                    <h2 className="text-xl font-semibold mb-4 flex items-center">
                                        <span className="mr-2">‚öôÔ∏è</span>
                                        Configuraci√≥n del Viaje
                                    </h2>

                                    <div className="space-y-4">
                                        {/* Configuraci√≥n de Precios de Combustible */}
                                        <div className="bg-yellow-50 p-4 rounded-lg border border-yellow-200">
                                            <h4 className="font-semibold text-yellow-800 mb-3 flex items-center">
                                                ‚õΩ Precios de Combustible Personalizados
                                            </h4>
                                            <div className="grid grid-cols-1 gap-3">
                                                <div>
                                                    <label className="block text-sm font-medium text-gray-700 mb-1">
                                                        üöê Precio Diesel (pesos/litro)
                                                    </label>
                                                    <div className="flex items-center space-x-2">
                                                        <span className="text-sm text-gray-500">$</span>
                                                        <input
                                                            type="number"
                                                            value={dieselPrice}
                                                            onChange={(e) => setDieselPrice(Number(e.target.value))}
                                                            className="flex-1 p-2 border border-gray-300 rounded-md focus:ring-yellow-500 focus:border-yellow-500 text-sm"
                                                            min="800"
                                                            max="1500"
                                                        />
                                                        <button
                                                            onClick={() => setDieselPrice(995)}
                                                            className="px-2 py-1 text-xs bg-yellow-100 text-yellow-700 rounded hover:bg-yellow-200"
                                                        >
                                                            Reset
                                                        </button>
                                                    </div>
                                                </div>
                                                <div>
                                                    <label className="block text-sm font-medium text-gray-700 mb-1">
                                                        üöó Precio Bencina 93 (pesos/litro)
                                                    </label>
                                                    <div className="flex items-center space-x-2">
                                                        <span className="text-sm text-gray-500">$</span>
                                                        <input
                                                            type="number"
                                                            value={gasolinePrice}
                                                            onChange={(e) => setGasolinePrice(Number(e.target.value))}
                                                            className="flex-1 p-2 border border-gray-300 rounded-md focus:ring-yellow-500 focus:border-yellow-500 text-sm"
                                                            min="1000"
                                                            max="1800"
                                                        />
                                                        <button
                                                            onClick={() => setGasolinePrice(1300)}
                                                            className="px-2 py-1 text-xs bg-yellow-100 text-yellow-700 rounded hover:bg-yellow-200"
                                                        >
                                                            Reset
                                                        </button>
                                                    </div>
                                                </div>
                                                <div className="text-xs text-yellow-700 bg-yellow-100 p-2 rounded">
                                                    üí° <strong>Tip:</strong> Actualiza estos precios seg√∫n las estaciones de servicio de tu zona.
                                                </div>
                                            </div>
                                        </div>

                                        {/* Selector de Veh√≠culo */}
                                        <div>
                                            <label className="block text-sm font-medium text-gray-700 mb-3">
                                                Selecciona el Veh√≠culo
                                            </label>
                                            <div className="grid grid-cols-1 gap-3">
                                                {Object.entries(vehicles).map(([key, vehicle]) => (
                                                    <button
                                                        key={key}
                                                        onClick={() => setSelectedVehicle(key)}
                                                        className={`p-4 rounded-lg border-2 text-left transition-all ${
                                                            selectedVehicle === key
                                                                ? 'bg-blue-500 text-white border-transparent shadow-lg'
                                                                : 'bg-white border-gray-200 hover:border-gray-300'
                                                        }`}
                                                    >
                                                        <div className="flex items-center space-x-3">
                                                            <span className="text-2xl">{vehicle.icon}</span>
                                                            <div>
                                                                <div className="font-semibold">{vehicle.name}</div>
                                                                <div className={`text-sm ${selectedVehicle === key ? 'text-blue-100' : 'text-gray-600'}`}>
                                                                    {vehicle.fuelType} ${vehicle.fuelPrice}/L | {vehicle.fuelConsumption}L/100km | Max: {vehicle.maxPassengers} pax
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </button>
                                                ))}
                                            </div>
                                        </div>

                                        <div>
                                            <label className="block text-sm font-medium text-gray-700 mb-2">
                                                Distancia del viaje (km)
                                            </label>
                                            <input
                                                type="number"
                                                value={distanceKm}
                                                onChange={(e) => setDistanceKm(Number(e.target.value))}
                                                className="w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"
                                                min="1"
                                            />
                                        </div>

                                        <div>
                                            <label className="block text-sm font-medium text-gray-700 mb-2">
                                                N√∫mero de pasajeros (m√°x: {currentVehicle.maxPassengers})
                                            </label>
                                            <input
                                                type="number"
                                                value={passengers}
                                                onChange={(e) => setPassengers(Math.min(Number(e.target.value), currentVehicle.maxPassengers))}
                                                className="w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"
                                                min="1"
                                                max={currentVehicle.maxPassengers}
                                            />
                                        </div>

                                        <div>
                                            <label className="block text-sm font-medium text-gray-700 mb-3">
                                                Tipo de Conductor
                                            </label>
                                            <div className="grid grid-cols-2 gap-2">
                                                {Object.entries(driverOptions).map(([key, option]) => (
                                                    <button
                                                        key={key}
                                                        onClick={() => setDriverOption(key)}
                                                        className={`p-3 rounded-lg border-2 text-left transition-all ${
                                                            driverOption === key
                                                                ? 'bg-indigo-500 text-white border-transparent shadow-lg'
                                                                : 'bg-white border-gray-200 hover:border-gray-300'
                                                        }`}
                                                    >
                                                        <div className="font-semibold text-sm">{option.label}</div>
                                                        <div className={`text-xs mt-1 ${
                                                            driverOption === key ? 'text-indigo-100' : 'text-gray-600'
                                                        }`}>
                                                            ${option.cost}/km
                                                        </div>
                                                    </button>
                                                ))}
                                            </div>
                                        </div>

                                        <div>
                                            <label className="block text-sm font-medium text-gray-700 mb-3">
                                                Modelo de Ganancia
                                            </label>
                                            <div className="grid grid-cols-2 gap-2">
                                                {marginModels.map((model) => (
                                                    <button
                                                        key={model.value}
                                                        onClick={() => setSelectedMargin(model.value)}
                                                        className={`p-3 rounded-lg border-2 text-left transition-all ${
                                                            selectedMargin === model.value
                                                                ? `${model.color} text-white border-transparent shadow-lg`
                                                                : 'bg-white border-gray-200 hover:border-gray-300'
                                                        }`}
                                                    >
                                                        <div className="font-semibold text-sm">{model.label} ({model.value}%)</div>
                                                        <div className={`text-xs mt-1 ${
                                                            selectedMargin === model.value ? 'text-white' : 'text-gray-600'
                                                        }`}>
                                                            {model.description}
                                                        </div>
                                                    </button>
                                                ))}
                                            </div>
                                        </div>

                                        <div className="flex items-center">
                                            <input
                                                type="checkbox"
                                                id="return"
                                                checked={includeReturn}
                                                onChange={(e) => setIncludeReturn(e.target.checked)}
                                                className="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"
                                            />
                                            <label htmlFor="return" className="ml-2 text-sm font-medium text-gray-700">
                                                Incluir viaje de regreso
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            {/* Panel de Resultados */}
                            <div className="space-y-6">
                                {/* Valor por Kil√≥metro */}
                                <div className="bg-gradient-to-r from-green-500 to-green-600 p-6 rounded-lg text-white">
                                    <h3 className="text-lg font-semibold mb-2 flex items-center">
                                        <span className="mr-2">üìà</span>
                                        Valor Ideal por Kil√≥metro
                                    </h3>
                                    <div className="text-3xl font-bold">${Math.round(finalCostPerKm)}</div>
                                    <p className="text-green-100 text-sm mt-1">
                                        {currentVehicle.name} + ganancia del {selectedMargin}%
                                    </p>
                                </div>

                                {/* C√°lculo del Viaje */}
                                <div className="bg-white border-2 border-blue-200 p-6 rounded-lg">
                                    <h3 className="text-lg font-semibold mb-4 flex items-center">
                                        <span className="mr-2">üìç</span>
                                        C√°lculo del Viaje
                                    </h3>

                                    <div className="space-y-3">
                                        <div className="flex justify-between">
                                            <span>Veh√≠culo:</span>
                                            <span className="font-medium">{currentVehicle.icon} {currentVehicle.name}</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span>Distancia total:</span>
                                            <span className="font-medium">{totalDistance} km</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span>Pasajeros:</span>
                                            <span className="font-medium">{passengers} de {currentVehicle.maxPassengers}</span>
                                        </div>
                                        <hr className="my-3" />
                                        <div className="flex justify-between text-lg">
                                            <span className="font-semibold">Costo total del viaje:</span>
                                            <span className="font-bold text-blue-600">${Math.round(totalCost).toLocaleString()}</span>
                                        </div>
                                        <div className="flex justify-between text-lg">
                                            <span className="font-semibold">Costo por persona:</span>
                                            <span className="font-bold text-green-600">${Math.round(costPerPerson).toLocaleString()}</span>
                                        </div>
                                    </div>
                                </div>

                                {/* Desglose de Costos */}
                                <div className="bg-gray-50 p-6 rounded-lg">
                                    <h3 className="text-lg font-semibold mb-4 flex items-center">
                                        <span className="mr-2">üßÆ</span>
                                        Desglose de Costos por Km
                                    </h3>

                                    <div className="space-y-3 text-sm">
                                        <div className="flex justify-between">
                                            <span>Combustible ({currentVehicle.fuelType} ${currentVehicle.fuelPrice}/L):</span>
                                            <span className="font-medium">${Math.round(fuelCostPerKm)}</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span>Mantenimiento:</span>
                                            <span className="font-medium">${currentVehicle.maintenance}</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span>Seguros:</span>
                                            <span className="font-medium">${currentVehicle.insurance}</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span>Depreciaci√≥n:</span>
                                            <span className="font-medium">${currentVehicle.depreciation}</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span>Conductor ({driverOptions[driverOption].label}):</span>
                                            <span className="font-medium">${selectedDriverCost}</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span>Gastos admin:</span>
                                            <span className="font-medium">${currentVehicle.overhead}</span>
                                        </div>
                                        <hr className="my-2" />
                                        <div className="flex justify-between font-semibold">
                                            <span>Costo base:</span>
                                            <span>${Math.round(totalCostPerKm)}</span>
                                        </div>
                                        <div className="flex justify-between text-green-600 font-semibold">
                                            <span>Ganancia ({selectedMargin}%):</span>
                                            <span>+${Math.round(totalCostPerKm * profitMargin)}</span>
                                        </div>
                                    </div>
                                </div>

                                {/* Comparativa */}
                                <div className="bg-purple-50 border-2 border-purple-200 p-6 rounded-lg">
                                    <h3 className="text-lg font-semibold mb-4 text-purple-800">
                                        üöó vs üöê Comparativa R√°pida
                                    </h3>

                                    <div className="space-y-3 text-sm">
                                        {Object.entries(vehicles).map(([key, vehicle]) => {
                                            const vehicleFuelCost = (vehicle.fuelPrice * vehicle.fuelConsumption) / 100;
                                            const vehicleTotalCost = vehicleFuelCost + vehicle.maintenance + vehicle.insurance + 
                                                                   vehicle.depreciation + selectedDriverCost + vehicle.overhead;
                                            const vehicleFinalCost = vehicleTotalCost * (1 + profitMargin);

                                            return (
                                                <div key={key} className={`p-3 rounded border ${selectedVehicle === key ? 'bg-purple-100 border-purple-300' : 'bg-white'}`}>
                                                    <div className="flex justify-between items-center">
                                                        <span className="font-medium">{vehicle.icon} {vehicle.name}</span>
                                                        <span className="font-bold">${Math.round(vehicleFinalCost)}/km</span>
                                                    </div>
                                                    <div className="text-xs text-gray-600 mt-1">
                                                        {vehicle.fuelType} ${vehicle.fuelPrice}/L ‚Ä¢ Max {vehicle.maxPassengers} pax
                                                    </div>
                                                </div>
                                            );
                                        })}
                                    </div>
                                </div>
                            </div>
                        </div>

                        {/* Footer */}
                        <div className="bg-gray-100 p-4 text-center text-sm text-gray-600">
                            <p><strong>Calculadora de Tarifas Chile 2025</strong> | Diesel ${dieselPrice}/L | Bencina 93 ${gasolinePrice}/L</p>
                            <p className="mt-1">üí° Herramienta para optimizar precios de servicios de transporte</p>
                        </div>
                    </div>
                </div>
            );
        };

        ReactDOM.render(<TransportCalculator />, document.getElementById('root'));
    </script>
</body>
</html>
