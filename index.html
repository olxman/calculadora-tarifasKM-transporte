<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Tarifas Pro 2025</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { margin: 0; padding: 0; font-family: system-ui; }
        .lucide { width: 1em; height: 1em; display: inline-block; }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script type="text/babel">
        const { useState } = React;
        
        // Iconos de Lucide
        const Calculator = () => React.createElement('svg', {
            className: "lucide lucide-calculator",
            fill: "none",
            stroke: "currentColor",
            strokeWidth: "2",
            viewBox: "0 0 24 24"
        }, React.createElement('rect', { width: "16", height: "20", x: "4", y: "2", rx: "2" }),
           React.createElement('line', { x1: "8", x2: "16", y1: "6", y2: "6" }),
           React.createElement('line', { x1: "16", x2: "16", y1: "14", y2: "18" }),
           React.createElement('path', { d: "M16 10h.01" }),
           React.createElement('path', { d: "M12 10h.01" }),
           React.createElement('path', { d: "M8 10h.01" }),
           React.createElement('path', { d: "M12 14h.01" }),
           React.createElement('path', { d: "M8 14h.01" }),
           React.createElement('path', { d: "M12 18h.01" }),
           React.createElement('path', { d: "M8 18h.01" }));

        const Car = () => React.createElement('svg', {
            className: "lucide lucide-car",
            fill: "none",
            stroke: "currentColor",
            strokeWidth: "2",
            viewBox: "0 0 24 24"
        }, React.createElement('path', { d: "M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9L18.4 9.6a2 2 0 0 0-1.9-1.6H7.5a2 2 0 0 0-1.9 1.6L3.5 11.1C2.7 11.3 2 12.1 2 13v3c0 .6.4 1 1 1h2" }),
           React.createElement('circle', { cx: "7", cy: "17", r: "2" }),
           React.createElement('path', { d: "M9 17h6" }),
           React.createElement('circle', { cx: "17", cy: "17", r: "2" }));

        const FileText = () => React.createElement('svg', {
            className: "lucide lucide-file-text",
            fill: "none",
            stroke: "currentColor",
            strokeWidth: "2",
            viewBox: "0 0 24 24"
        }, React.createElement('path', { d: "M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z" }),
           React.createElement('path', { d: "M14 2v4a2 2 0 0 0 2 2h4" }),
           React.createElement('path', { d: "M10 9H8" }),
           React.createElement('path', { d: "M16 13H8" }),
           React.createElement('path', { d: "M16 17H8" }));

        const Settings = () => React.createElement('svg', {
            className: "lucide lucide-settings",
            fill: "none",
            stroke: "currentColor",
            strokeWidth: "2",
            viewBox: "0 0 24 24"
        }, React.createElement('path', { d: "M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z" }),
           React.createElement('circle', { cx: "12", cy: "12", r: "3" }));

        const Download = () => React.createElement('svg', {
            className: "lucide lucide-download",
            fill: "none",
            stroke: "currentColor",
            strokeWidth: "2",
            viewBox: "0 0 24 24"
        }, React.createElement('path', { d: "M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" }),
           React.createElement('polyline', { points: "7,10 12,15 17,10" }),
           React.createElement('line', { x1: "12", x2: "12", y1: "15", y2: "3" }));

        const TransportCalculator = () => {
            const [activeTab, setActiveTab] = useState('calculator');
            const [distanceKm, setDistanceKm] = useState(100);
            const [passengers, setPassengers] = useState(5);
            const [selectedVehicle, setSelectedVehicle] = useState('h1');
            const [selectedMargin, setSelectedMargin] = useState(25);
            const [driverOption, setDriverOption] = useState('employed');
            const [dieselPrice, setDieselPrice] = useState(995);
            const [gasolinePrice, setGasolinePrice] = useState(1300);
            const [commissionPercentage, setCommissionPercentage] = useState(25);
            
            const vehicles = {
                h1: {
                    name: "Hyundai H1 2021",
                    fuelType: "Diesel",
                    fuelConsumption: 10.5,
                    maintenance: 65,
                    insurance: 12,
                    depreciation: 35,
                    overhead: 18,
                    maxPassengers: 10,
                    icon: "üöê",
                    basePassengerCost: 8,
                    efficiencyFactor: 0.9
                },
                explorer: {
                    name: "Ford Explorer 2025",
                    fuelType: "Bencina 93",
                    fuelConsumption: 12.8,
                    maintenance: 135,
                    insurance: 45,
                    depreciation: 95,
                    overhead: 35,
                    maxPassengers: 5,
                    icon: "üöó",
                    basePassengerCost: 25,
                    efficiencyFactor: 1.2
                },
                citroen: {
                    name: "Citro√´n C5 Aircross 2020",
                    fuelType: "Diesel",
                    fuelConsumption: 9.8,
                    maintenance: 75,
                    insurance: 22,
                    depreciation: 48,
                    overhead: 20,
                    maxPassengers: 4,
                    icon: "üöô",
                    basePassengerCost: 18,
                    efficiencyFactor: 1.0
                }
            };
            
            const currentVehicle = vehicles[selectedVehicle];
            const currentFuelPrice = currentVehicle.fuelType === "Diesel" ? dieselPrice : gasolinePrice;
            
            const driverOptions = {
                basic: { cost: 25, label: "B√°sico" },
                employed: { cost: 190, label: "Empleado" },
                commission: { cost: 'variable', label: "Comisi√≥n" },
                owner: { cost: 550, label: "Propietario" }
            };
            
            const fuelCostPerKm = (currentFuelPrice * currentVehicle.fuelConsumption) / 100;
            const profitMargin = selectedMargin / 100;
            const passengerFactor = passengers / currentVehicle.maxPassengers;
            const passengerCostPerKm = currentVehicle.basePassengerCost * passengers;
            const occupancyMultiplier = currentVehicle.efficiencyFactor * (1 + (passengerFactor * 0.2));
            
            let totalCostPerKm, finalCostPerKm;
            
            if (driverOption === 'commission') {
                const baseCostPerKm = (fuelCostPerKm + currentVehicle.maintenance + currentVehicle.insurance + 
                                     currentVehicle.depreciation + currentVehicle.overhead + passengerCostPerKm) * occupancyMultiplier;
                const preliminaryPrice = baseCostPerKm * (1 + profitMargin);
                const commissionCost = preliminaryPrice * (commissionPercentage / 100);
                totalCostPerKm = baseCostPerKm + commissionCost;
                finalCostPerKm = totalCostPerKm * (1 + profitMargin);
            } else {
                const driverCost = driverOptions[driverOption].cost;
                totalCostPerKm = (fuelCostPerKm + currentVehicle.maintenance + currentVehicle.insurance + 
                                currentVehicle.depreciation + driverCost + currentVehicle.overhead + passengerCostPerKm) * occupancyMultiplier;
                finalCostPerKm = totalCostPerKm * (1 + profitMargin);
            }
            
            const totalCost = finalCostPerKm * distanceKm;
            const costPerPerson = passengers > 0 ? totalCost / passengers : totalCost;
            
            return React.createElement('div', {
                className: "min-h-screen bg-gray-900 text-white"
            }, React.createElement('div', {
                className: "max-w-6xl mx-auto p-6"
            }, React.createElement('div', {
                className: "bg-gray-800 rounded-xl shadow-2xl overflow-hidden"
            }, 
                // Header
                React.createElement('div', {
                    className: "bg-gradient-to-r from-blue-600 to-indigo-700 p-6 text-white"
                }, 
                    React.createElement('div', {
                        className: "flex items-center space-x-3"
                    }, 
                        React.createElement(Car, { className: "w-8 h-8" }),
                        React.createElement('div', {},
                            React.createElement('h1', { className: "text-3xl font-bold" }, "Calculadora de Tarifas Pro 2025"),
                            React.createElement('p', { className: "text-blue-100" }, "An√°lisis completo de costos - Chile")
                        )
                    ),
                    // Tabs
                    React.createElement('div', {
                        className: "flex space-x-2 mt-4"
                    },
                        React.createElement('button', {
                            onClick: () => setActiveTab('calculator'),
                            className: `flex items-center space-x-2 px-4 py-2 rounded-lg transition-all ${
                                activeTab === 'calculator' ? 'bg-blue-600 text-white' : 'bg-gray-700 text-gray-300 hover:bg-gray-600'
                            }`
                        },
                            React.createElement(Calculator, { className: "w-4 h-4" }),
                            React.createElement('span', {}, "Calculadora")
                        ),
                        React.createElement('button', {
                            onClick: () => setActiveTab('quote'),
                            className: `flex items-center space-x-2 px-4 py-2 rounded-lg transition-all ${
                                activeTab === 'quote' ? 'bg-blue-600 text-white' : 'bg-gray-700 text-gray-300 hover:bg-gray-600'
                            }`
                        },
                            React.createElement(FileText, { className: "w-4 h-4" }),
                            React.createElement('span', {}, "Cotizaci√≥n")
                        )
                    )
                ),
                
                // Content
                React.createElement('div', { className: "p-6" },
                    activeTab === 'calculator' && React.createElement('div', {
                        className: "grid lg:grid-cols-2 gap-8"
                    },
                        // Panel de Configuraci√≥n
                        React.createElement('div', { className: "space-y-6" },
                            React.createElement('div', { className: "bg-gray-700 p-6 rounded-lg" },
                                React.createElement('h2', {
                                    className: "text-xl font-semibold mb-4 flex items-center"
                                },
                                    React.createElement(Settings, { className: "w-5 h-5 mr-2" }),
                                    "Configuraci√≥n"
                                ),
                                
                                // Precios de Combustible
                                React.createElement('div', {
                                    className: "bg-yellow-900 border-yellow-700 p-4 rounded-lg border mb-4"
                                },
                                    React.createElement('h4', {
                                        className: "font-semibold mb-3 text-yellow-300"
                                    }, "‚õΩ Precios de Combustible"),
                                    React.createElement('div', { className: "grid grid-cols-2 gap-3" },
                                        React.createElement('div', {},
                                            React.createElement('label', {
                                                className: "block text-sm font-medium mb-1 text-gray-300"
                                            }, "Diesel ($/L)"),
                                            React.createElement('input', {
                                                type: "number",
                                                value: dieselPrice,
                                                onChange: (e) => setDieselPrice(Number(e.target.value)),
                                                className: "w-full p-2 border rounded-md text-sm bg-gray-700 border-gray-600 text-white"
                                            })
                                        ),
                                        React.createElement('div', {},
                                            React.createElement('label', {
                                                className: "block text-sm font-medium mb-1 text-gray-300"
                                            }, "Bencina 93 ($/L)"),
                                            React.createElement('input', {
                                                type: "number",
                                                value: gasolinePrice,
                                                onChange: (e) => setGasolinePrice(Number(e.target.value)),
                                                className: "w-full p-2 border rounded-md text-sm bg-gray-700 border-gray-600 text-white"
                                            })
                                        )
                                    )
                                ),
                                
                                // Selector de Veh√≠culo
                                React.createElement('div', { className: "mb-4" },
                                    React.createElement('label', {
                                        className: "block text-sm font-medium mb-3 text-gray-300"
                                    }, "Veh√≠culo"),
                                    React.createElement('div', { className: "space-y-2" },
                                        Object.entries(vehicles).map(([key, vehicle]) =>
                                            React.createElement('button', {
                                                key: key,
                                                onClick: () => setSelectedVehicle(key),
                                                className: `w-full p-3 rounded-lg border-2 text-left transition-all ${
                                                    selectedVehicle === key
                                                        ? 'bg-blue-500 text-white border-transparent shadow-lg'
                                                        : 'bg-gray-700 border-gray-600 hover:border-gray-500 text-white'
                                                }`
                                            },
                                                React.createElement('div', {
                                                    className: "flex items-center space-x-3"
                                                },
                                                    React.createElement('span', {
                                                        className: "text-2xl"
                                                    }, vehicle.icon),
                                                    React.createElement('div', {},
                                                        React.createElement('div', {
                                                            className: "font-semibold"
                                                        }, vehicle.name),
                                                        React.createElement('div', {
                                                            className: "text-sm text-gray-400"
                                                        }, `${vehicle.fuelType} | ${vehicle.fuelConsumption}L/100km | Max: ${vehicle.maxPassengers} pax`)
                                                    )
                                                )
                                            )
                                        )
                                    )
                                ),
                                
                                // Distancia y Pasajeros
                                React.createElement('div', { className: "grid grid-cols-2 gap-4 mb-4" },
                                    React.createElement('div', {},
                                        React.createElement('label', {
                                            className: "block text-sm font-medium mb-2 text-gray-300"
                                        }, "Distancia (km)"),
                                        React.createElement('input', {
                                            type: "number",
                                            value: distanceKm,
                                            onChange: (e) => setDistanceKm(Number(e.target.value)),
                                            className: "w-full p-3 border rounded-md bg-gray-700 border-gray-600 text-white"
                                        })
                                    ),
                                    React.createElement('div', {},
                                        React.createElement('label', {
                                            className: "block text-sm font-medium mb-2 text-gray-300"
                                        }, `Pasajeros (m√°x: ${currentVehicle.maxPassengers})`),
                                        React.createElement('input', {
                                            type: "number",
                                            value: passengers,
                                            onChange: (e) => setPassengers(Math.min(Math.max(Number(e.target.value), 1), currentVehicle.maxPassengers)),
                                            className: "w-full p-3 border rounded-md bg-gray-700 border-gray-600 text-white",
                                            min: "1",
                                            max: currentVehicle.maxPassengers
                                        })
                                    )
                                ),
                                
                                // Selector Visual de Pasajeros
                                React.createElement('div', { className: "mb-4" },
                                    React.createElement('div', {
                                        className: "bg-blue-900 border-blue-700 p-4 rounded-lg border"
                                    },
                                        React.createElement('h4', {
                                            className: "font-semibold mb-3 text-blue-300"
                                        }, "üë• Selector de Pasajeros"),
                                        React.createElement('div', { className: "grid grid-cols-5 gap-2 mb-3" },
                                            Array.from({ length: currentVehicle.maxPassengers }, (_, i) => i + 1).map((num) =>
                                                React.createElement('button', {
                                                    key: num,
                                                    onClick: () => setPassengers(num),
                                                    className: `p-2 rounded text-sm font-medium transition-all ${
                                                        passengers === num
                                                            ? 'bg-blue-500 text-white'
                                                            : 'bg-gray-700 text-gray-300 hover:bg-gray-600'
                                                    }`
                                                }, num)
                                            )
                                        ),
                                        React.createElement('div', { className: "text-xs text-blue-200" },
                                            React.createElement('div', {}, `Ocupaci√≥n: ${Math.round((passengers / currentVehicle.maxPassengers) * 100)}%`),
                                            React.createElement('div', {}, `Costo por pasajero: $${currentVehicle.basePassengerCost}/km`),
