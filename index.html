<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Tarifas Pro 2025 - Chile</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 0;
        }
        .dark { background-color: #111827; color: white; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        const TransportCalculator = () => {
            const [distanceKm, setDistanceKm] = useState(100);
            const [passengers, setPassengers] = useState(5);
            const [includeReturn, setIncludeReturn] = useState(false);
            const [selectedMargin, setSelectedMargin] = useState(25);
            const [driverOption, setDriverOption] = useState('employed');
            const [selectedVehicle, setSelectedVehicle] = useState('h1');
            const [dieselPrice, setDieselPrice] = useState(995);
            const [gasolinePrice, setGasolinePrice] = useState(1300);
            const [darkMode, setDarkMode] = useState(true);
            const [activeTab, setActiveTab] = useState('calculator');
            
            // ROI Calculator states
            const [vehiclePrice, setVehiclePrice] = useState(25000000);
            const [monthlyKm, setMonthlyKm] = useState(3000);
            const [operatingMonths, setOperatingMonths] = useState(12);
            
            // Configuración de vehículos
            const vehicles = {
                h1: {
                    name: "Hyundai H1 2021",
                    fuelType: "Diesel",
                    fuelPrice: dieselPrice,
                    fuelConsumption: 10.5,
                    maintenance: 85,
                    insurance: 15,
                    depreciation: 45,
                    overhead: 20,
                    maxPassengers: 10,
                    icon: "🚐",
                    purchasePrice: 28000000
                },
                explorer: {
                    name: "Ford Explorer 2025",
                    fuelType: "Bencina 93",
                    fuelPrice: gasolinePrice,
                    fuelConsumption: 11.5,
                    maintenance: 95,
                    insurance: 25,
                    depreciation: 85,
                    overhead: 25,
                    maxPassengers: 7,
                    icon: "🚗",
                    purchasePrice: 45000000
                },
                citroen: {
                    name: "Citroën C5 Aircross 2020",
                    fuelType: "Diesel",
                    fuelPrice: dieselPrice,
                    fuelConsumption: 9.8,
                    maintenance: 90,
                    insurance: 20,
                    depreciation: 55,
                    overhead: 22,
                    maxPassengers: 5,
                    icon: "🚙",
                    purchasePrice: 22000000
                }
            };
            
            const currentVehicle = vehicles[selectedVehicle];
            
            // Opciones de conductor (VALORES ACTUALIZADOS 2025)
            const driverOptions = {
                basic: { cost: 25, label: "Básico", description: "Solo referencia teórica" },
                employed: { cost: 190, label: "Empleado", description: "Sueldo + cargas sociales reales" },
                commission: { cost: 100, label: "Comisión", description: "22-25% del viaje (estándar)" },
                owner: { cost: 550, label: "Propietario", description: "Valor tiempo empresario" }
            };
            
            const selectedDriverCost = driverOptions[driverOption]?.cost || 175;
            
            // Cálculo del costo por kilómetro
            const fuelCostPerKm = (currentVehicle.fuelPrice * currentVehicle.fuelConsumption) / 100;
            const totalCostPerKm = fuelCostPerKm + currentVehicle.maintenance + currentVehicle.insurance + 
                                  currentVehicle.depreciation + selectedDriverCost + currentVehicle.overhead;
            
            const profitMargin = selectedMargin / 100;
            const finalCostPerKm = totalCostPerKm * (1 + profitMargin);
            
            // Modelos de ganancia
            const marginModels = [
                { value: 25, label: "Básico", description: "Competitivo", color: "bg-blue-500" },
                { value: 35, label: "Estándar", description: "Equilibrado", color: "bg-green-500" },
                { value: 45, label: "Premium", description: "Alta calidad", color: "bg-orange-500" },
                { value: 50, label: "Ejecutivo", description: "Exclusivo", color: "bg-purple-500" }
            ];
            
            // Cálculos principales
            const totalDistance = includeReturn ? distanceKm * 2 : distanceKm;
            const totalCost = finalCostPerKm * totalDistance;
            const costPerPerson = passengers > 0 ? totalCost / passengers : totalCost;
            
            // ROI Calculations
            const monthlyRevenue = monthlyKm * finalCostPerKm;
            const monthlyCosts = monthlyKm * totalCostPerKm;
            const monthlyProfit = monthlyRevenue - monthlyCosts;
            const annualProfit = monthlyProfit * operatingMonths;
            const roiPeriod = vehiclePrice / monthlyProfit;
            const roiPercentage = (annualProfit / vehiclePrice) * 100;
            
            // Tema oscuro/claro
            const bgClass = darkMode ? 'bg-gray-900' : 'bg-gradient-to-br from-blue-50 to-indigo-100';
            const cardClass = darkMode ? 'bg-gray-800 text-white' : 'bg-white text-gray-900';
            const inputClass = darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'bg-white border-gray-300 text-gray-900';
            
            // Función para generar PDF
            const generatePDF = () => {
                const cotizacion = `COTIZACIÓN DE SERVICIO DE TRANSPORTE
=====================================

Vehículo: ${currentVehicle.name}
Distancia: ${totalDistance} km
Pasajeros: ${passengers}
Tipo conductor: ${driverOptions[driverOption].label}
Margen: ${selectedMargin}%

DESGLOSE DE COSTOS:
- Combustible: $${Math.round(fuelCostPerKm)}/km
- Mantenimiento: $${currentVehicle.maintenance}/km
- Seguros: $${currentVehicle.insurance}/km
- Depreciación: $${currentVehicle.depreciation}/km
- Conductor: $${selectedDriverCost}/km
- Administrativos: $${currentVehicle.overhead}/km

TOTAL POR KM: $${Math.round(finalCostPerKm)}
COSTO TOTAL VIAJE: $${Math.round(totalCost).toLocaleString()}
COSTO POR PERSONA: $${Math.round(costPerPerson).toLocaleString()}

Cotización válida por 7 días.
Fecha: ${new Date().toLocaleDateString('es-CL')}`;
                
                const blob = new Blob([cotizacion], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const link = document.createElement('a');
                link.href = url;
                link.download = `Cotizacion_${currentVehicle.name.replace(/\s+/g, '_')}_${new Date().toISOString().split('T')[0]}.txt`;
                link.click();
                URL.revokeObjectURL(url);
            };
            
            const TabButton = ({ id, label, icon }) => (
                <button
                    onClick={() => setActiveTab(id)}
                    className={`flex items-center space-x-2 px-4 py-2 rounded-lg transition-all text-sm font-medium ${
                        activeTab === id
                            ? darkMode ? 'bg-blue-600 text-white' : 'bg-blue-500 text-white'
                            : darkMode ? 'bg-gray-700 text-gray-300 hover:bg-gray-600' : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
                    }`}
                >
                    <span>{icon}</span>
                    <span>{label}</span>
                </button>
            );
            
            return (
                <div className={`min-h-screen ${bgClass} ${darkMode ? 'text-white' : 'text-gray-900'}`}>
                    <div className="max-w-7xl mx-auto p-6">
                        <div className={`${cardClass} rounded-xl shadow-2xl overflow-hidden`}>
                            {/* Header */}
                            <div className={`${darkMode ? 'bg-gradient-to-r from-gray-800 to-gray-900' : 'bg-gradient-to-r from-blue-600 to-indigo-700'} p-6 text-white`}>
                                <div className="flex items-center justify-between">
                                    <div className="flex items-center space-x-3">
                                        <span className="text-3xl">🚗</span>
                                        <div>
                                            <h1 className="text-3xl font-bold">Calculadora de Tarifas Pro 2025</h1>
                                            <p className="text-blue-100">Análisis completo de costos y ROI - Chile</p>
                                        </div>
                                    </div>
                                    <div className="flex items-center space-x-4">
                                        <button
                                            onClick={generatePDF}
                                            className="flex items-center space-x-2 bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg transition-colors"
                                        >
                                            <span>📥</span>
                                            <span>Exportar</span>
                                        </button>
                                        <button
                                            onClick={() => setDarkMode(!darkMode)}
                                            className={`p-2 rounded-lg transition-colors ${
                                                darkMode ? 'bg-gray-700 hover:bg-gray-600' : 'bg-blue-500 hover:bg-blue-400'
                                            }`}
                                        >
                                            {darkMode ? '☀️' : '🌙'}
                                        </button>
                                    </div>
                                </div>
                                
                                {/* Navigation Tabs */}
                                <div className="flex space-x-2 mt-4">
                                    <TabButton id="calculator" label="Calculadora" icon="🧮" />
                                    <TabButton id="roi" label="ROI Analysis" icon="📊" />
                                    <TabButton id="compare" label="Comparador" icon="📈" />
                                    <TabButton id="quote" label="Cotización" icon="📄" />
                                </div>
                            </div>
                            
                            {/* Tab Content */}
                            <div className="p-6">
                                {activeTab === 'calculator' && (
                                    <div className="grid lg:grid-cols-2 gap-8">
                                        {/* Panel de Configuración */}
                                        <div className="space-y-6">
                                            <div className={`${darkMode ? 'bg-gray-700' : 'bg-gray-50'} p-6 rounded-lg`}>
                                                <h2 className="text-xl font-semibold mb-4 flex items-center">
                                                    <span className="mr-2">⚙️</span>
                                                    Configuración del Viaje
                                                </h2>
                                                
                                                <div className="space-y-4">
                                                    {/* Precios de Combustible */}
                                                    <div className={`${darkMode ? 'bg-yellow-900 border-yellow-700' : 'bg-yellow-50 border-yellow-200'} p-4 rounded-lg border`}>
                                                        <h4 className={`font-semibold mb-3 ${darkMode ? 'text-yellow-300' : 'text-yellow-800'}`}>
                                                            ⛽ Precios de Combustible
                                                        </h4>
                                                        <div className="grid grid-cols-2 gap-3">
                                                            <div>
                                                                <label className={`block text-sm font-medium mb-1 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>
                                                                    🚐 Diesel ($/L)
                                                                </label>
                                                                <input
                                                                    type="number"
                                                                    value={dieselPrice}
                                                                    onChange={(e) => setDieselPrice(Number(e.target.value))}
                                                                    className={`w-full p-2 border rounded-md text-sm ${inputClass}`}
                                                                    min="800"
                                                                    max="1500"
                                                                />
                                                            </div>
                                                            <div>
                                                                <label className={`block text-sm font-medium mb-1 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>
                                                                    🚗 Bencina 93 ($/L)
                                                                </label>
                                                                <input
                                                                    type="number"
                                                                    value={gasolinePrice}
                                                                    onChange={(e) => setGasolinePrice(Number(e.target.value))}
                                                                    className={`w-full p-2 border rounded-md text-sm ${inputClass}`}
                                                                    min="1000"
                                                                    max="1800"
                                                                />
                                                            </div>
                                                        </div>
                                                    </div>
                                                    
                                                    {/* Selector de Vehículo */}
                                                    <div>
                                                        <label className={`block text-sm font-medium mb-3 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>
                                                            Selecciona el Vehículo
                                                        </label>
                                                        <div className="space-y-2">
                                                            {Object.entries(vehicles).map(([key, vehicle]) => (
                                                                <button
                                                                    key={key}
                                                                    onClick={() => setSelectedVehicle(key)}
                                                                    className={`w-full p-3 rounded-lg border-2 text-left transition-all ${
                                                                        selectedVehicle === key
                                                                            ? 'bg-blue-500 text-white border-transparent shadow-lg'
                                                                            : darkMode 
                                                                                ? 'bg-gray-700 border-gray-600 hover:border-gray-500 text-white'
                                                                                : 'bg-white border-gray-200 hover:border-gray-300 text-gray-900'
                                                                    }`}
                                                                >
                                                                    <div className="flex items-center space-x-3">
                                                                        <span className="text-2xl">{vehicle.icon}</span>
                                                                        <div>
                                                                            <div className="font-semibold">{vehicle.name}</div>
                                                                            <div className={`text-sm ${selectedVehicle === key ? 'text-blue-100' : darkMode ? 'text-gray-400' : 'text-gray-600'}`}>
                                                                                {vehicle.fuelType} ${vehicle.fuelPrice}/L | {vehicle.fuelConsumption}L/100km | Max: {vehicle.maxPassengers} pax
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </button>
                                                            ))}
                                                        </div>
                                                    </div>
                                                    
                                                    <div className="grid grid-cols-2 gap-4">
                                                        <div>
                                                            <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>
                                                                Distancia (km)
                                                            </label>
                                                            <input
                                                                type="number"
                                                                value={distanceKm}
                                                                onChange={(e) => setDistanceKm(Number(e.target.value))}
                                                                className={`w-full p-3 border rounded-md ${inputClass}`}
                                                                min="1"
                                                            />
                                                        </div>
                                                        
                                                        <div>
                                                            <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>
                                                                Pasajeros (máx: {currentVehicle.maxPassengers})
                                                            </label>
                                                            <input
                                                                type="number"
                                                                value={passengers}
                                                                onChange={(e) => setPassengers(Math.min(Number(e.target.value), currentVehicle.maxPassengers))}
                                                                className={`w-full p-3 border rounded-md ${inputClass}`}
                                                                min="1"
                                                                max={currentVehicle.maxPassengers}
                                                            />
                                                        </div>
                                                    </div>
                                                    
                                                    {/* Tipo de Conductor */}
                                                    <div>
                                                        <label className={`block text-sm font-medium mb-3 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>
                                                            Tipo de Conductor
                                                        </label>
                                                        <div className="grid grid-cols-2 gap-2">
                                                            {Object.entries(driverOptions).map(([key, option]) => (
                                                                <button
                                                                    key={key}
                                                                    onClick={() => setDriverOption(key)}
                                                                    className={`p-3 rounded-lg border-2 text-left transition-all ${
                                                                        driverOption === key
                                                                            ? 'bg-indigo-500 text-white border-transparent shadow-lg'
                                                                            : darkMode 
                                                                                ? 'bg-gray-700 border-gray-600 hover:border-gray-500 text-white'
                                                                                : 'bg-white border-gray-200 hover:border-gray-300 text-gray-900'
                                                                    }`}
                                                                >
                                                                    <div className="font-semibold text-sm">{option.label}</div>
                                                                    <div className={`text-xs mt-1 ${
                                                                        driverOption === key ? 'text-indigo-100' : darkMode ? 'text-gray-400' : 'text-gray-600'
                                                                    }`}>
                                                                        ${option.cost}/km
                                                                    </div>
                                                                </button>
                                                            ))}
                                                        </div>
                                                    </div>
                                                    
                                                    {/* Modelo de Ganancia */}
                                                    <div>
                                                        <label className={`block text-sm font-medium mb-3 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>
                                                            Modelo de Ganancia
                                                        </label>
                                                        <div className="grid grid-cols-2 gap-2">
                                                            {marginModels.map((model) => (
                                                                <button
                                                                    key={model.value}
                                                                    onClick={() => setSelectedMargin(model.value)}
                                                                    className={`p-3 rounded-lg border-2 text-left transition-all ${
                                                                        selectedMargin === model.value
                                                                            ? `${model.color} text-white border-transparent shadow-lg`
                                                                            : darkMode 
                                                                                ? 'bg-gray-700 border-gray-600 hover:border-gray-500 text-white'
                                                                                : 'bg-white border-gray-200 hover:border-gray-300 text-gray-900'
                                                                    }`}
                                                                >
                                                                    <div className="font-semibold text-sm">{model.label} ({model.value}%)</div>
                                                                    <div className={`text-xs mt-1 ${
                                                                        selectedMargin === model.value ? 'text-white' : darkMode ? 'text-gray-400' : 'text-gray-600'
                                                                    }`}>
                                                                        {model.description}
                                                                    </div>
                                                                </button>
                                                            ))}
                                                        </div>
                                                    </div>
                                                    
                                                    <div className="flex items-center">
                                                        <input
                                                            type="checkbox"
                                                            id="return"
                                                            checked={includeReturn}
                                                            onChange={(e) => setIncludeReturn(e.target.checked)}
                                                            className="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"
                                                        />
                                                        <label htmlFor="return" className={`ml-2 text-sm font-medium ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>
                                                            Incluir viaje de regreso
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        {/* Panel de Resultados */}
                                        <div className="space-y-6">
                                            {/* Valor por Kilómetro */}
                                            <div className="bg-gradient-to-r from-green-500 to-green-600 p-6 rounded-lg text-white">
                                                <h3 className="text-lg font-semibold mb-2 flex items-center">
                                                    <span className="mr-2">📈</span>
                                                    Valor Ideal por Kilómetro
                                                </h3>
                                                <div className="text-3xl font-bold">${Math.round(finalCostPerKm)}</div>
                                                <p className="text-green-100 text-sm mt-1">
                                                    {currentVehicle.name} + ganancia del {selectedMargin}%
                                                </p>
                                            </div>
                                            
                                            {/* Cálculo del Viaje */}
                                            <div className={`${cardClass} border-2 ${darkMode ? 'border-blue-500' : 'border-blue-200'} p-6 rounded-lg`}>
                                                <h3 className="text-lg font-semibold mb-4 flex items-center">
                                                    <span className="mr-2">📍</span>
                                                    Cálculo del Viaje
                                                </h3>
                                                
                                                <div className="space-y-3">
                                                    <div className="flex justify-between">
                                                        <span>Vehículo:</span>
                                                        <span className="font-medium">{currentVehicle.icon} {currentVehicle.name}</span>
                                                    </div>
                                                    <div className="flex justify-between">
                                                        <span>Distancia total:</span>
                                                        <span className="font-medium">{totalDistance} km</span>
                                                    </div>
                                                    <div className="flex justify-between">
                                                        <span>Pasajeros:</span>
                                                        <span className="font-medium">{passengers} de {currentVehicle.maxPassengers}</span>
                                                    </div>
                                                    <hr className="my-3" />
                                                    <div className="flex justify-between text-lg">
                                                        <span className="font-semibold">Costo total del viaje:</span>
                                                        <span className="font-bold text-blue-600">${Math.round(totalCost).toLocaleString()}</span>
                                                    </div>
                                                    <div className="flex justify-between text-lg">
                                                        <span className="font-semibold">Costo por persona:</span>
                                                        <span className="font-bold text-green-600">${Math.round(costPerPerson).toLocaleString()}</span>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            {/* Desglose de Costos */}
                                            <div className={`${darkMode ? 'bg-gray-700' : 'bg-gray-50'} p-6 rounded-lg`}>
                                                <h3 className="text-lg font-semibold mb-4 flex items-center">
                                                    <span className="mr-2">🧮</span>
                                                    Desglose de Costos por Km
                                                </h3>
                                                
                                                <div className="space-y-3 text-sm">
                                                    <div className="flex justify-between">
                                                        <span>Combustible ({currentVehicle.fuelType}):</span>
                                                        <span className="font-medium">${Math.round(fuelCostPerKm)}</span>
                                                    </div>
                                                    <div className="flex justify-between">
                                                        <span>Mantenimiento:</span>
                                                        <span className="font-medium">${currentVehicle.maintenance}</span>
                                                    </div>
                                                    <div className="flex justify-between">
                                                        <span>Seguros:</span>
                                                        <span className="font-medium">${currentVehicle.insurance}</span>
                                                    </div>
                                                    <div className="flex justify-between">
                                                        <span>Depreciación:</span>
                                                        <span className="font-medium">${currentVehicle.depreciation}</span>
                                                    </div>
                                                    <div className="flex justify-between">
                                                        <span>Conductor ({driverOptions[driverOption].label}):</span>
                                                        <span className="font-medium">${selectedDriverCost}</span>
                                                    </div>
                                                    <div className="flex justify-between">
                                                        <span>Administrativos:</span>
                                                        <span className="font-medium">${currentVehicle.overhead}</span>
                                                    </div>
                                                    <hr className="my-2" />
                                                    <div className="flex justify-between font-semibold">
                                                        <span>Costo base:</span>
                                                        <span>${Math.round(totalCostPerKm)}</span>
                                                    </div>
                                                    <div className="flex justify-between text-green-600 font-semibold">
                                                        <span>Ganancia ({selectedMargin}%):</span>
                                                        <span>+${Math.round(totalCostPerKm * profitMargin)}</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                )}
                                
                                {/* ROI Tab Content - Simplificado para HTML */}
                                {activeTab === 'roi' && (
                                    <div className="text-center py-20">
                                        <h2 className="text-2xl font-bold mb-4">📊 Análisis de ROI</h2>
                                        <div className={`${cardClass} max-w-md mx-auto p-6 rounded-lg`}>
                                            <p className="mb-4">ROI estimado con {currentVehicle.name}:</p>
                                            <div className="text-3xl font-bold text-green-600 mb-2">
                                                {((monthlyProfit * 12 / currentVehicle.purchasePrice) * 100).toFixed(1)}%
                                            </div>
                                            <p className="text-sm">ROI anual estimado</p>
                                            <div className="mt-4 text-sm">
                                                <div>Ganancia mensual estimada: ${Math.round(monthlyProfit).toLocaleString()}</div>
                                                <div>Recuperación: {(currentVehicle.purchasePrice / monthlyProfit / 12).toFixed(1)} años</div>
                                            </div>
                                        </div>
                                    </div>
                                )}
                                
                                {/* Compare Tab Content */}
                                {activeTab === 'compare' && (
                                    <div>
                                        <h2 className="text-2xl font-semibold mb-6">🚗 Comparador de Vehículos</h2>
                                        <div className="grid md:grid-cols-3 gap-6">
                                            {Object.entries(vehicles).map(([key, vehicle]) => {
                                                const vehicleFuelCost = (vehicle.fuelPrice * vehicle.fuelConsumption) / 100;
                                                const vehicleTotalCost = vehicleFuelCost + vehicle.maintenance + vehicle.insurance + 
                                                                       vehicle.depreciation + selectedDriverCost + vehicle.overhead;
                                                const vehicleFinalCost = vehicleTotalCost * (1 + profitMargin);
                                                
                                                return (
                                                    <div key={key} className={`${cardClass} p-6 rounded-lg border-2 ${
                                                        selectedVehicle === key ? 'border-blue-500' : darkMode ? 'border-gray-600' : 'border-gray-200'
                                                    }`}>
                                                        <div className="text-center mb-4">
                                                            <div className="text-3xl mb-2">{vehicle.icon}</div>
                                                            <h3 className="font-semibold">{vehicle.name}</h3>
                                                        </div>
                                                        
                                                        <div className="space-y-2 text-sm">
                                                            <div className="flex justify-between">
                                                                <span>Precio/km:</span>
                                                                <span className="font-bold">${Math.round(vehicleFinalCost)}</span>
                                                            </div>
                                                            <div className="flex justify-between">
                                                                <span>Capacidad:</span>
                                                                <span>{vehicle.maxPassengers} pax</span>
                                                            </div>
                                                            <div className="flex justify-between">
                                                                <span>Combustible:</span>
                                                                <span>${Math.round(vehicleFuelCost)}/km</span>
                                                            </div>
                                                            <div className="flex justify-between">
                                                                <span>Inversión:</span>
                                                                <span>${(vehicle.purchasePrice / 1000000).toFixed(1)}M</span>
                                                            </div>
                                                        </div>
                                                        
                                                        <button
                                                            onClick={() => setSelectedVehicle(key)}
                                                            className={`w-full mt-4 py-2 px-4 rounded-lg transition-colors ${
                                                                selectedVehicle === key
                                                                    ? 'bg-blue-600 text-white'
                                                                    : darkMode 
                                                                        ? 'bg-gray-600 hover:bg-gray-500 text-white'
                                                                        : 'bg-gray-200 hover:bg-gray-300 text-gray-900'
                                                            }`}
                                                        >
                                                            {selectedVehicle === key ? 'Seleccionado' : 'Seleccionar'}
                                                        </button>
                                                    </div>
                                                );
                                            })}
                                        </div>
                                    </div>
                                )}
                                
                                {/* Quote Tab Content */}
                                {activeTab === 'quote' && (
                                    <div className="max-w-4xl mx-auto">
                                        <div className={`${cardClass} p-8 rounded-lg shadow-lg`}>
                                            <div className="text-center mb-8">
                                                <h2 className="text-3xl font-bold mb-2">📄 COTIZACIÓN DE SERVICIO</h2>
                                                <p className={`${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>
                                                    Servicio de Transporte Profesional
                                                </p>
                                                <div className={`${darkMode ? 'text-gray-400' : 'text-gray-600'} text-sm mt-2`}>
                                                    Fecha: {new Date().toLocaleDateString('es-CL')} | Válida por 7 días
                                                </div>
                                            </div>
                                            
                                            <div className="grid md:grid-cols-2 gap-8 mb-8">
                                                <div>
                                                    <h3 className="text-lg font-semibold mb-4 border-b pb-2">Detalles del Servicio</h3>
                                                    <div className="space-y-3">
                                                        <div className="flex justify-between">
                                                            <span>Vehículo:</span>
                                                            <span className="font-medium">{currentVehicle.icon} {currentVehicle.name}</span>
                                                        </div>
                                                        <div className="flex justify-between">
                                                            <span>Distancia:</span>
                                                            <span className="font-medium">{totalDistance} km</span>
                                                        </div>
                                                        <div className="flex justify-between">
                                                            <span>Pasajeros:</span>
                                                            <span className="font-medium">{passengers} de {currentVehicle.maxPassengers}</span>
                                                        </div>
                                                        <div className="flex justify-between">
                                                            <span>Tipo conductor:</span>
                                                            <span className="font-medium">{driverOptions[driverOption].label}</span>
                                                        </div>
                                                        <div className="flex justify-between">
                                                            <span>Modalidad:</span>
                                                            <span className="font-medium">{marginModels.find(m => m.value === selectedMargin).label}</span>
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                <div>
                                                    <h3 className="text-lg font-semibold mb-4 border-b pb-2">Desglose de Costos</h3>
                                                    <div className="space-y-3 text-sm">
                                                        <div className="flex justify-between">
                                                            <span>Combustible:</span>
                                                            <span>${Math.round(fuelCostPerKm * totalDistance).toLocaleString()}</span>
                                                        </div>
                                                        <div className="flex justify-between">
                                                            <span>Mantenimiento:</span>
                                                            <span>${Math.round(currentVehicle.maintenance * totalDistance).toLocaleString()}</span>
                                                        </div>
                                                        <div className="flex justify-between">
                                                            <span>Seguros:</span>
                                                            <span>${Math.round(currentVehicle.insurance * totalDistance).toLocaleString()}</span>
                                                        </div>
                                                        <div className="flex justify-between">
                                                            <span>Conductor:</span>
                                                            <span>${Math.round(selectedDriverCost * totalDistance).toLocaleString()}</span>
                                                        </div>
                                                        <div className="flex justify-between">
                                                            <span>Administrativos:</span>
                                                            <span>${Math.round(currentVehicle.overhead * totalDistance).toLocaleString()}</span>
                                                        </div>
                                                        <hr className="my-2" />
                                                        <div className="flex justify-between">
                                                            <span>Subtotal:</span>
                                                            <span>${Math.round(totalCostPerKm * totalDistance).toLocaleString()}</span>
                                                        </div>
                                                        <div className="flex justify-between text-green-600">
                                                            <span>Margen ({selectedMargin}%):</span>
                                                            <span>${Math.round(totalCostPerKm * profitMargin * totalDistance).toLocaleString()}</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <div className="border-t pt-6">
                                                <div className="flex justify-between items-center mb-6">
                                                    <div>
                                                        <div className="text-2xl font-bold text-blue-600">
                                                            TOTAL: ${Math.round(totalCost).toLocaleString()}
                                                        </div>
                                                        <div className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>
                                                            Costo por persona: ${Math.round(costPerPerson).toLocaleString()}
                                                        </div>
                                                    </div>
                                                    <div className="text-right">
                                                        <div className="text-lg font-semibold">Precio por km:</div>
                                                        <div className="text-xl font-bold text-green-600">${Math.round(finalCostPerKm)}</div>
                                                    </div>
                                                </div>
                                                
                                                <div className="flex gap-4">
                                                    <button
                                                        onClick={generatePDF}
                                                        className="flex-1 bg-blue-600 hover:bg-blue-700 text-white py-3 px-6 rounded-lg transition-colors flex items-center justify-center space-x-2"
                                                    >
                                                        <span>📥</span>
                                                        <span>Descargar Cotización</span>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                )}
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        ReactDOM.render(<TransportCalculator />, document.getElementById('root'));
    </script>
</body>
</html>
